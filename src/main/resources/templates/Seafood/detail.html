<!DOCTYPE html>
<html lang="en" xmlns:th="">
<head>
    <meta charset="UTF-8">
    <title ></title>
    <th:block th:replace="layout :: link-css"></th:block>
    <style>
        /* Thêm các định dạng CSS tại đây */
        .product-details {
            background-color: #f4f4f4;
            padding: 20px;
        }

        .product__details__pic__item {
            text-align: center;
        }

        .product__details__pic__item--large {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
        }

        .product__details__text {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
        }

        .product__details__text h3 {
            margin-bottom: 15px;
        }

        .product__details__price {
            font-size: 24px;
            color: #e53e3e;
            margin-bottom: 20px;
        }

        .primary-btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
        }

        .primary-btn:hover {
            background-color: #0056b3;
        }

        .heart-icon {
            display: inline-block;
            margin-left: 15px;
            color: #ff4081;
        }
        #image-slider {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        #image-slider img {
            width: 100px; /* Hoặc kích thước phù hợp với thiết kế của bạn */
            height: auto;
            cursor: pointer;
            border: 2px solid #f0f0f0;
            border-radius: 5px;
        }

        #image-slider img:hover {
            border-color: #007bff;
        }
        #main-image {
            transition: opacity 0.2s ease-in-out;
            opacity: 1;
        }
    </style>
</head>
<th:block th:replace="layout :: header"></th:block>
<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-section set-bg" data-setbg="/img/banner/banner-cua.jpg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb__text">
                    <h2>Hải Sản Xanh</h2>
                    <div class="breadcrumb__option">
                        <a href="/">Trang chủ</a>
                        <a href="/seafood/list">Sản phẩm</a>
                        <span></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb Section End -->

<section class="product-details spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6">
                <div class="product__details__pic">
                    <div class="product__details__pic__item">
                        <img id="main-image" class="product__details__pic__item--large" src="" alt="Hình ảnh chính">
                    </div>
                    <div id="image-slider" class="product__details__pic__slider owl-carousel slider-thumbnails">
                        <!-- JavaScript sẽ thêm hình ảnh phụ ở đây -->
                    </div>

                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="product__details__text">
                    <h3 id="product-name"></h3>
                    <div class="product__details__rating">
                        <!-- Phần đánh giá, cũng có thể được cập nhật bởi JavaScript nếu cần -->
                    </div>
                    <div id="product-price" class="product__details__price"></div>
                    <p id="product-description"></p>
                    <div class="product__details__quantity">
                        <div class="quantity">
                            <div class="pro-qty">
                                <input type="text" value="1">
                            </div>
                        </div>
                    </div>
                    <a href="#" class="primary-btn">Thêm giỏ hàng</a>
                    <ul>
                        <li><b>Xuất xứ</b> <span id="product-origin"></span></li>
                        <!-- Các thông tin khác -->
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>


<body>
<div class="container py-5">
</div>
<th:block th:replace="layout :: footer"></th:block>
<script>
    function updateMainImage(src) {
        const mainImage = document.getElementById('main-image');
        mainImage.style.opacity = '0'; // Làm mờ hình ảnh chính

        // Đợi cho hình ảnh mờ đi rồi thay đổi src
        setTimeout(() => {
            mainImage.src = src;
            mainImage.style.opacity = '1'; // Làm hình ảnh trở nên rõ ràng trở lại
        }, 500); // Thời gian đợi tương ứng với thời gian transition
    }
    function fetchSeafoodDetails(id) {
        fetch(`http://localhost:8080/api/seafoods/${id}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Seafood not found');
                }
                return response.json();
            })
            .then(data => updateSeafoodDetails(data))
            .catch(error => console.error('Error:', error));
    }

    function updateSeafoodDetails(seafood) {
        const mainImage = document.getElementById('main-image');
        mainImage.src = seafood.mainImage || 'path-to-default-image.jpg';
        document.getElementById('product-name').innerText = seafood.name || 'Tên không xác định';
        document.getElementById('product-price').innerText = seafood.price ? `${seafood.price.toLocaleString()} VND` : 'Giá không xác định';
        document.getElementById('product-description').innerText = seafood.description || 'Không có mô tả';

        const imageSlider = document.getElementById('image-slider');
        imageSlider.innerHTML = '';

        ['mainImage','extraImage1', 'extraImage2', 'extraImage3'].forEach(key => {
            if (seafood[key]) {
                let img = document.createElement('img');
                img.src = seafood[key];
                img.alt = 'Hình ảnh phụ';
                img.classList.add('slider-thumbnail'); // Thêm class cho styling nếu cần
                img.onclick = function() {
                    updateMainImage(img.src); // Cập nhật hình ảnh chính khi click vào hình ảnh phụ
                };
                imageSlider.appendChild(img);
            }
        });
    }

    window.onload = function() {
        const url = window.location.href;
        const id = url.substring(url.lastIndexOf('/') + 1);
        fetchSeafoodDetails(id);
    };

</script>
</body>
</html>